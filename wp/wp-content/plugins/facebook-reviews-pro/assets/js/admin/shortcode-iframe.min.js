jQuery.noConflict(),function(e){"use strict";function i(){o(),a(),setTimeout(function(){e("body.iframe").css({height:"auto"})},200);var i=e(".fbw-shortcode-hidden-fields-wrap"),_=e(".facebook-id-set"),s=e(".fbw-shortcode-submit"),n=e(".fbw-toggle-shortcode-fields"),l=e(".fbw-edit-shortcode");e("#page_id").on("change",function(){return e(this).val()?void(l.is("visible")||(_.slideDown(),s.slideDown(),n.slideDown())):(_.slideUp(),s.slideUp(),n.slideUp(),i.slideUp(),l.slideUp(),!1)}),n.on("click",function(){i.slideToggle()}),r===!0&&(l.show(),i.show(),e("#fbw_submit").val("Edit Shortcode"),t(d))}function t(i){var t=_(i.shortcode_params,"id"),a=_(i.shortcode_params,"title"),o=_(i.shortcode_params,"review_limit"),d=_(i.shortcode_params,"cache"),r=_(i.shortcode_params,"review_filter"),s=(_(i.shortcode_params,"review_char_limit"),_(i.shortcode_params,"profile_img_size")),n=_(i.shortcode_params,"display_address"),l=_(i.shortcode_params,"display_phone"),c=_(i.shortcode_params,"display_google_map"),w=_(i.shortcode_params,"disable_map_scroll"),p=_(i.shortcode_params,"google_map_position"),g=_(i.shortcode_params,"disable_business_info"),f=_(i.shortcode_params,"hide_rating"),h=_(i.shortcode_params,"hide_blank_rating"),m=_(i.shortcode_params,"disable_title_output"),b=_(i.shortcode_params,"target_blank"),u=_(i.shortcode_params,"no_follow");return t?(e("#fbw_widget_place_id").val(t),t&&e("#page_id").val(t),a&&e("#fbw_widget_title").val(a),r&&e("#fbw_widget_review_filter").val(r),o&&e("#fbw_widget_review_limit").val(o),d&&e("#fbw_widget_cache").val(d),"true"==g&&e("#fbw_widget_hide_header").prop("checked",!0),"true"==n&&e("#fbw_widget_display_address").prop("checked",!0),"true"==l&&e("#fbw_widget_display_phone").prop("checked",!0),"true"==c&&e("#fbw_widget_display_google_map").prop("checked",!0),"true"==w&&e("#fbw_widget_disable_map_scroll").prop("checked",!0),p&&e('[name="fbw_widget_google_map_position"][value="'+p+'"]').prop("checked",!0),"true"==f&&e("#fbw_widget_hide_rating").prop("checked",!0),"true"==h&&e("#fbw_widget_hide_blank_rating").prop("checked",!0),s&&e("#fbw_widget_profile_img_size").val(s),"true"==m&&e("#fbw_widget_disable_title_output").prop("checked",!0),"false"==u&&e("#fbw_widget_no_follow").prop("checked",!1),void("false"==b&&e("#fbw_widget_target_blank").prop("checked",!1))):(alert("There was no Place ID found for this shortcode. Please create a new one."),!1)}function a(){e("#fbw_settings").on("submit",function(i){i.preventDefault();var t,a=top.tinymce.activeEditor.windowManager.getParams(),o=e('[name="page_id"]').val(),_=e('[name="fbw_widget_title"]').val(),d=e('[name="fbw_widget_review_limit"]').val(),r=e('[name="fbw_widget_review_filter"]').val(),s=e('[name="fbw_widget_hide_header"]').is(":checked"),n=e('[name="fbw_widget_display_address"]').is(":checked"),l=e('[name="fbw_widget_display_phone"]').is(":checked"),c=e('[name="fbw_widget_display_google_map"]').is(":checked"),w=e('[name="fbw_widget_disable_map_scroll"]').is(":checked"),p=e('[name="fbw_widget_google_map_position"]:checked').val(),g=e('[name="fbw_widget_hide_rating"]').is(":checked"),f=e('[name="fbw_widget_hide_blank_rating"]').is(":checked"),h=e('[name="fbw_widget_profile_img_size"]').val(),m=e('[name="fbw_widget_disable_title_output"]').is(":checked"),b=e('[name="fbw_widget_no_follow"]').is(":checked"),u=e('[name="fbw_widget_target_blank"]').is(":checked"),v=e('[name="fbw_widget_cache"]').val();return""===o?(alert("Missing Location's Page ID. Please try reloading pages in the plugin settings."),!1):(t="["+a.shortcode,o&&(t+=' id="'+o+'"'),_&&(t+=' title="'+_+'"'),"25"!==d&&(t+=' review_limit="'+d+'"'),"none"!==r&&(t+=' review_filter="'+r+'"'),""!==v&&"2 Days"!==v&&(t+=' cache="'+v+'"'),1==s&&(t+=' disable_business_info="true"'),1==n&&(t+=' display_address="true"'),1==l&&(t+=' display_phone="true"'),1==c&&(t+=' display_google_map="true"'),1==w&&1==c&&(t+=' disable_map_scroll="true"'),p&&1==c&&(t+=' google_map_position="'+p+'"'),1==g&&(t+=' hide_rating="true"'),1==f&&(t+=' hide_blank_rating="true"'),h&&(t+=' profile_img_size="'+h+'"'),1==m&&(t+=' disable_title_output="true"'),b!==!0&&(t+=' no_follow="false"'),u!==!0&&(t+=' target_blank="false"'),t+="]",top.tinyMCE.activeEditor.execCommand("mceInsertContent",0,t),void top.tinymce.activeEditor.windowManager.close())})}function o(){e(".tooltip-info").tipsy({fade:!0,html:!0,gravity:"n",delayOut:1e3,delayIn:500})}function _(e,i){return i=new RegExp(i+'="([^"]+)"',"g").exec(e),i?window.decodeURIComponent(i[1]):""}var d="",r=!1;e(document).ready(function(){e("#fbw_cancel").on("click",function(e){top.tinymce.activeEditor.windowManager.close(),e.preventDefault()}),d=top.tinyMCE.activeEditor.windowManager.getParams(),"undefined"!==d.shortcode_params&&(r=!0),i()})}(jQuery);